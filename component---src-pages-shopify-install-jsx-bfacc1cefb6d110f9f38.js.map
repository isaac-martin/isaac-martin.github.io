{"version":3,"sources":["webpack:///./src/pages/shopify-install.jsx","webpack:///./src/components/foundational/Redirect/index.tsx"],"names":["withRedirectUrl","recompose","location","shopId","qs","parse","search","ignoreQueryPrefix","shop","redirectUrl","formatUrl","withRedirectOnMount","componentDidMount","setTimeout","window","replace","props","Redirect","className","id","style","marginTop","href"],"mappings":"uLASMA,EAAkBC,KAAoB,YAAmB,IAAhBC,EAAe,EAAfA,SACvCC,EAASC,IAAGC,MAAMH,EAASI,OAAQ,CAAEC,mBAAmB,IAAQC,KACtE,MAAO,CACLC,YAAaC,YAAU,WACVP,EADS,wJAMpBQ,EAAsBV,IAC1BD,EACAC,IAAoB,CAClBW,kBADkB,WACG,IAAD,OAClBC,YAAW,WACTC,OAAOZ,SAASa,QAAQ,EAAKC,MAAMP,eAClC,UAKMR,cAAkBU,EAAlBV,CAAuCgB,M,kCC7BtD,wCAqBeA,IAhB4B,SAAC,GAAD,IAAGR,EAAH,EAAGA,YAAaP,EAAhB,EAAgBA,SAAhB,OACzC,YAAC,IAAD,CAAQA,SAAUA,GAChB,uBAASgB,UAAU,yCAAyCC,GAAG,QAC7D,mBACED,UAAU,iCACVE,MAAO,CAAEC,UAAW,UAEpB,wCACA,iDAC2B,iBAAGC,KAAMb,GAAT","file":"component---src-pages-shopify-install-jsx-bfacc1cefb6d110f9f38.js","sourcesContent":["import qs from \"qs\";\nimport * as recompose from \"recompose\";\nimport Redirect from \"components/foundational/Redirect\";\nimport { formatUrl } from \"utils/formatting\";\n\n// This component is meant to help us achieve step two of this flow, which is\n// part of the requirements to get Brex on the Shopify app store:\n// https://www.shopify.com/portal/blog/17056443-how-to-generate-a-shopify-api-token\n\nconst withRedirectUrl = recompose.withProps(({ location }) => {\n  const shopId = qs.parse(location.search, { ignoreQueryPrefix: true }).shop;\n  return {\n    redirectUrl: formatUrl(\n      `https://${shopId}/admin/oauth/authorize?client_id=${process.env.SHOPIFY_API_KEY}&scope=read_content&redirect_uri=https://brex.com/signup/?companyType=ecommerce`,\n    ),\n  };\n});\n\nconst withRedirectOnMount = recompose.compose(\n  withRedirectUrl,\n  recompose.lifecycle({\n    componentDidMount() {\n      setTimeout(() => {\n        window.location.replace(this.props.redirectUrl);\n      }, 1200);\n    },\n  }),\n);\n\nexport default recompose.compose(withRedirectOnMount)(Redirect);\n","import Layout from \"components/layout\";\nimport React from \"react\";\n\nimport { RedirectProps } from \"./types\";\n\nconst Redirect: React.SFC<RedirectProps> = ({ redirectUrl, location }) => (\n  <Layout location={location}>\n    <section className=\"section section--hero section--bg-city\" id=\"hero\">\n      <div\n        className=\"align-items-center text-center\"\n        style={{ marginTop: \"250px\" }}\n      >\n        <h4>Redirecting...</h4>\n        <p>\n          If it doesnt work, click <a href={redirectUrl}>here</a>\n        </p>\n      </div>\n    </section>\n  </Layout>\n);\n\nexport default Redirect;\n"],"sourceRoot":""}